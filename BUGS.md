# BUGS.md — Найденные дефекты в микросервисе объявлений

**Дата тестирования:** 23 ноября 2025  
**Окружение:** https://qa-internship.avito.com  
**Тестировщик:** MariLague  
**Инструменты:** Python 3.12 + pytest + requests + jsonschema  

---

**Баг №1**— Критический

**Название:** Невозможно создать объявление с полями статистики — 400 Bad Request  

**Описание:**  
POST-запрос `/api/1/item` отклоняет валидный ранее payload, если в нём присутствуют поля `likes`, `viewCount`, `contacts` — даже со значением `0`.  

**Шаги воспроизведения:**  
1. Отправить POST на `https://qa-internship.avito.com/api/1/item`  
2. Тело запроса:  
```json
{
  "sellerID": 555555,
  "name": "test-item",
  "price": 999,
  "likes": 0,
  "viewCount": 0,
  "contacts": 0
}
```

Ожидаемый результат: Объявление успешно создаётся (200/201)
Фактический результат:

```json
{
  "result": {
    "message": "поле likes обязательно",
    "messages": {}
  },
  "status": "400"
}
```

Комментарий:
Поля likes, viewCount, contacts ранее были частью контракта и передавались при создании. 
Сейчас их передача запрещена, но сообщение об ошибке вводит в заблуждение ("обязательно" вместо "запрещено").
Полная потеря обратной совместимости.

**Баг №2**— Высокая

**Название:** Устаревшая и некорректная Postman-документация

**Серьёзность:** High

**Описание:**
Примеры в официальной Postman-коллекции содержат поля statistics.likes, likes, viewCount, contacts при создании объявления — но эти поля сейчас вызывают ошибку 400.

Комментарий:
Все новые тестировщики и разработчики, следующие документации, будут получать ошибку. Документация не соответствует реальному поведению API.

**Баг №3**— Средняя

**Название:** GET /api/1/item/{id} возвращает массив вместо объекта

**Серьёзность:** Medium

**Описание:**
Запрос получения одного объявления по ID возвращает массив из одного элемента вместо ожидаемого объекта.

Пример ответа:

```json
[ { "id": "abc123", "sellerId": 123456, ... } ]
```

**Ожидаемый результат:** объект

**Фактический результат:** массив

Комментарий:
Нарушает общепринятые REST-практики, усложняет парсинг на клиенте.

**Баг №4**— Низкая

**Название:** Неконсистентное именование поля sellerID / sellerId

**Серьёзность:** Low

Описание:

В запросе требуется поле: "sellerID" (с большой буквы и D)
В ответе приходит: "sellerId"

Комментарий:
Не ошибка, но снижает консистентность и читаемость API.


LLm used for написание отчета и анализа ошибок запроса, т.к. с первым багом были проблемы

спасибо за внимание