Задание 2

Тест-кейсы

Базовый URL: https://qa-internship.avito.com

**Вспомогательные функции**

generator: генерировать sellerID случайным образом в диапазоне [111111,999999].

---

*1*. POST /api/1/item — Сохранить объявление

TC-POST-01: Успешное создание объявления
- Предусловия: sellerID валиден (111111-999999)
- Шаги: POST /api/1/item с корректным JSON:
  {
    "sellerID": <int>,
    "name": "Test name",
    "price": 100,
    "statistics": {"likes": 0, "viewCount": 0, "contacts": 0}
  }
- ОР: код 200, тело содержит поля: id (string), sellerId (int), name (string), price (int), statistics (obj with likes, viewCount, contacts), createdAt (string). sellerId==sellerID.

TC-POST-02: Ошибка при sellerID < 111111
- Шаги: POST с sellerID=111110
- ОР: 400 Bad Request (или другая ошибка клиента); в теле - сообщение об ошибке.

TC-POST-03: Ошибка при sellerID > 999999
- Шаги: POST с sellerID=1000000
- ОР: 400 Bad Request.

TC-POST-04: Ошибка при отсутствии поля name
- Шаги: исключить поле name из body
- ОР: 400 Bad Request.

TC-POST-05: Ошибка при price строкой
- Шаги: price = "one hundred"
- ОР: 400 Bad Request.

TC-POST-06: Создание с пустым statistics (опционально)
- Шаги: statistics omitted or empty
- ОР: либо 200 с default statistics либо 400 — проверить контракт.

---

*2*. GET /api/1/item/:id — Получить объявление по id

TC-GET-01: Успешное получение существующего объявления
- Предусловие: объявление создано
- Шаги: GET /api/1/item/{id}
- ОР: 200, тело соответствует структуре (id, sellerId, name, price, statistics, createdAt), значения совпадают с созданным.

TC-GET-02: Запрос несуществующего id
- Шаги: GET /api/1/item/non-existent-id
- ОР: 404 Not Found.

TC-GET-03: Неверный тип id (например, пустая строка)
- Шаги: GET /api/1/item/
- ОР: 400.

---

*3*. GET /api/1/:sellerID/item — Получить все объявления продавца

TC-SELLER-01: Получение списка объявлений продавца с хотя бы одним объявлением
- Предусловие: создать N объявлений одному sellerID
- Шаги: GET /api/1/{sellerID}/item
- ОР: 200, возвращён массив объектов, размер >= N, для каждого объекта sellerId == sellerID.

TC-SELLER-02: Продавец без объявлений
- Шаги: GET /api/1/{sellerID}/item, где sellerID валиден, но не создавали объявления
- ОР: 200, тело — пустой массив [] (или явно отражённое отсутствие).

TC-SELLER-03: Неверный sellerID (меньше 111111 / больше 999999)
- Шаги: GET с sellerID=111110
- ОР: 400 Bad Request.

---

*4*. GET /api/1/statistic/:id — Статистика

TC-STAT-01: Получение статистики существующего объявления
- Предусловие: объявление создано
- Шаги: GET /api/1/statistic/{id}
- ОР: 200, массив объектов с ключами likes, viewCount, contacts (целые числа).

TC-STAT-02: Запрос статистики по несуществующему id
- Шаги: GET /api/1/statistic/non-existent
- ОР: 404 Not Found.

TC-STAT-03: Неверный тип id
- Шаги: GET /api/1/statistic/ (пустой)
- ОР: 400 Bad Request.

---

*5*. Cross-resource / E2E сценарии

TC-E2E-01: Создать → получить → проверить в списке продавца → статистика
- Создать объявление A для seller S
- GET /api/1/item/{A.id} → проверить поля
- GET /api/1/{S}/item → убедиться, что A присутствует
- GET /api/1/statistic/{A.id} → проверить корректность структуры статистики

TC-E2E-02: Создать 3 объявления для одного seller → GET по seller вернёт >=3 элементов.

---

*6*. Дополнительные негативные проверки / граничные условия

- TC-NEG-01: Создать объявление с очень длинным name (например, 5000 символов) — проверить поведение (200/400).
- TC-NEG-02: Отправить body с лишними неизвестными полями — сервис должен либо игнорировать, либо возвращать 400.
- TC-NEG-03: Одновременное создание нескольких объявлений (concurrency) — проверить отсутствие коллизий id.

---

Примечания:
- Используйте уникальные sellerID (рандом в [111111,999999]) чтобы минимизировать коллизии со сторонними данными.
- Логично очищать созданные данные (DELETE /api/2/item/:id) при возможности — но не полагайтесь на удаление как на обязательный шаг (если нет доступа). 

LLM использовалась на генерации красивого и понятного мд файла, также для ускорения написания кода

я прикинула сценарии, расписала их и попросила проверить мой код и отредактировать его, написать понятнее переменные и переименовать функции, т.к. мои записи было бы неудобно читать и анализировать также как и код